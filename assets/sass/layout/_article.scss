@use 'sass:string';
@use 'metadata';

@mixin article($content-type) {

  @if $content-type != "content" and $content-type != 'excerpt' {
    @error "Unknown post content type";
  }
  margin: auto;

  // @debug "content type: #{$content-type}";

  @media (min-width: 601px) {
    & {
      // @debug "larger screen";
      // @debug "#{&}";
      $title: "\"post-featured_image post-title\"";
      $metadata: "\"post-featured_image metadata\"";
      $content: "\"post-featured_image post-" + $content-type + "\"";
      $grid-areas: #{$title} + " " + #{$metadata} + " "  + #{$content};
      // @debug "grid (larger-screen): #{$grid-areas}";
      grid-template-areas:
        #{$grid-areas}
      ;
    }
  }
  @media (max-width: 600px) {
    & {
      // @debug "smaller screen";
      // @debug "#{&}";
      $title: "\"post-featured_image post-title\"";
      $metadata: "\"post-featured_image metadata\"";
      $content: "\"post-" + $content-type + " post-" + $content-type + "\"";
      $grid-areas: #{$title} + " " + #{$metadata} + " "  + #{$content};
      // @debug "grid (smaller-screen): #{$grid-areas}";
      grid-template-areas:
        #{$grid-areas}
      ;
    }
  }
  & {
    // background-color: yellow;
    // border: 1px solid yellow;
    margin: 0;
    padding: 0;
    // Grid container
    display: grid;
    grid-template-columns: clamp(10vw, 200px, 20vw) minmax(10px, 1fr);
    grid-template-rows: auto;
    column-gap: calc(2 * var(--pp--space--hor));
    row-gap: calc(1 * var(--pp--space--ver));
    // End of grid container
  }
  @if ($content-type == "content") {
    &.pp-focus {
      // @debug "#{&}";
      $featured-image: "\"post-featured_image\"";
      $title: "\"post-title\"";
      $metadata: "\"metadata\"";
      $content: "\"post-#{$content-type}\"";
      $grid-areas: #{$title} + " " + #{$featured-image} + " " + #{$metadata} + " "  + #{$content};
      // @debug "grid (focus): #{$grid-areas}";
      // background-color: maroon;
      // border: 1px solid maroon;
      // Grid container
      grid-template-columns: 100%;
      grid-template-areas:
        #{$grid-areas}
      ;
      column-gap: calc(0 * var(--pp--space--hor));
      row-gap: calc(1 * var(--pp--space--ver));
      // End of grid container
    }
  }
  &.pp-no-featured_image {
    // @debug "#{&}";
    $title: "\"post-title\"";
    $metadata: "\"metadata\"";
    $content: "\"post-#{$content-type}\"";
    $grid-areas: #{$title} + " " + #{$metadata} + " "  + #{$content};
    // @debug "grid (no feat. img.): #{$grid-areas}";
    // background-color: mediumaquamarine;
    // border: 1px solid mediumaquamarine;
    // Grid container
    grid-template-columns: 100%;
    grid-template-areas:
      #{$grid-areas}
    ;
    column-gap: calc(0 * var(--pp--space--hor));
    row-gap: calc(1 * var(--pp--space--ver));
    // End of grid container
    .pp-article-featured_image {
      display: none;
    }
  }
  & {
    .pp-article-title {
      // background-color: green;
      // border: 1px solid green;
      // Grid item
      grid-area: post-title;
      place-self: start stretch;
      // End of grid item
      margin: 0;
    }

    @include metadata.metadata;

    .pp-article-content {
      // background-color: darkcyan;
      // border: 1px solid darkcyan;
      margin: inherit;
      padding: inherit;
      &.pp-article-content_excerpt {
        // background-color: lightcyan;
        // border: 1px solid lightcyan;
        // Grid item
        grid-area: post-excerpt;
        // End of grid item
      }
      &.pp-article-content_full {
        // background-color: cyan;
        // border: 1px solid cyan;
        // Grid item
        grid-area: post-content;
      }
      img {
        // Make sure images don't stick off the edge of the page:
        height: auto;
        max-width: 100%;
      }
    }

    .pp-article-featured_image {
      // background-color: gold;
      // border: 1px solid gold;
      margin: inherit;
      padding: inherit;
      // Grid item
      grid-area: post-featured_image;
      // End of grid item
    }
    @if ($content-type == "content") {
      &.pp-focus {
        .pp-article-featured_image {
          margin: auto;
        }
      }
    }

  }


} // End of @mixin post-content
