@use 'post-content';

// Used by single post, page, etc.

.single,
.page {
  .pp-main {
    // @debug #{&};
    // background-color: palegreen;
    // border: 1px solid palegreen;
    // Grid container
    @include post-content.post-content('content');
    // End of grid container
    &.pp-front-page {
      // Currently acts like it's in the loop, even though it's a page..
      // Grid container
      @include post-content.post-content('excerpt');
      // End of grid container
      .pp-template.pp-front-page {
        $col-gap: calc(1 * var(--pp--space--hor));
        $row-gap: calc(0.5 * var(--pp--space--ver));
        gap: $row-gap $col-gap;
        @supports (grid-template-rows: masonry) {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(300px, auto));
          grid-template-rows: masonry;
          .wp-block-post {
            // background-color: mintcream;
          }
        }
        @supports not (grid-template-rows: masonry) {
          // background-color: lawngreen;
          display: flex;
          flex-flow: row wrap;
          align-content: stretch;
          align-items: stretch;
          justify-content: center;
          .wp-block-post {
            // background-color: cornsilk;
            // The flex-basis values are very much dependent on the value of "perPage" in the WP Query object in front-page.html. IT's a shame this value can't be passed down to here (easily).
            flex: 1 1 calc((1/3*100%) - (3*$col-gap));
            @media screen and (max-width: 782px) {
              flex: 1 1 calc((1/2*100%) - (3*$col-gap));
            }
            @media screen and (max-width: 599px) {
              flex: 1 1 calc((1*100%) - (3*$col-gap));
            }
          }
        }
      }
    }
  }
}
